@page
@using Microsoft.AspNetCore.Mvc.TagHelpers
@using Sfa.Tl.Find.Provider.Infrastructure.Authorization
@model EmployerListModel
@{
    ViewData["Title"] = PageExtensions.FormatTitleWithAdministratorTag(
        "Employer list", 
        HttpContext.User);
}

@if (User.IsInRole(CustomRoles.Administrator))
{
    <partial name="_administratorEmployerList" />
}
else 
{
    <partial name="_providerEmployerList" />
}

@section scripts {
    @if (Model?.UkPrn is not null)
    {
        <script>
            $("#Input_SelectedPostcode").change(function () {
                let inputval = $(this).val();
                if (inputval && inputval != "Enter postcode") {
                    $("#postcode-form").submit();
                }
                $(".tl-employers--search").toggleClass('active', inputval === "Enter postcode");
            });
        </script>
    }
}